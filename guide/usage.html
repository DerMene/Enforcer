<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <title>3 Usage 0.3.1</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen, print" title="Style" charset="utf-8"/>
    <link rel="stylesheet" href="../css/pdf.css" type="text/css" media="print" title="PDF" charset="utf-8"/>
    <script type="text/javascript">
function addJsClass() {
    var classes = document.body.className.split(" ");
    classes.push("js");
    document.body.className = classes.join(" ");
}
    </script>
</head>

<body class="body" onload="addJsClass();">
<div id="navigation">
    <ul>
        <li>
            <div id="nav-summary" onmouseover="toggleNavSummary(false)" onmouseout="toggleNavSummary(true)">
                <a href="../guide/index.html" class="button">Table of contents</a>

                <div id="nav-summary-childs" style="display:none;">
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/introduction.html"><strong>1</strong><span>Introduction</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/gettingStarted.html"><strong>2</strong><span>Getting Started</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/usage.html"><strong>3</strong><span>Usage</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/whyUseEnforcer.html"><strong>4</strong><span>Why Use Enforcer</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/extendingEnforcer.html"><strong>5</strong><span>Extending Enforcer</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/testingEnforcer.html"><strong>6</strong><span>Testing Enforcer</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/enforcerAST.html"><strong>7</strong><span>Taking a look at the Enforce AST code</span></a>
                    </div>
                    
                </div>
            </div>
        </li>
        <li class="separator selected">
            <a id="ref-button" onclick="localToggle(); return false;" href="#">Quick Reference</a>
        </li>
    </ul>
</div>
<div id="header">
    <div class="images clearfix">
        
        
    </div>
    <p></p>
</div>


<table id="colset" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td id="col1">
            <div id="main" class="corner-all">

                
                    <div class="toc-item prev-left"><a href="../guide/gettingStarted.html">&lt;&lt; <strong>2</strong><span>Getting Started</span></a></div>
                

                <span id='toggle-col1' class="toggle">(<a href="#" onclick="localToggle(); return false;">Quick Reference</a>)</span>

                
                    <div class="toc-item next-right"><a href="../guide/whyUseEnforcer.html"><strong>4</strong><span>Why Use Enforcer</span> >></a></div>
                


                <div class="project">
                    <h1>3 Usage - Reference Documentation</h1>

                    <p><strong>Authors:</strong> Tucker J. Pelletier AKA virtualdogbert</p>

                    <p><strong>Version:</strong> 0.3.1</p>

                    
                </div>

                

                

<h1 id="usage">3 Usage</h1>
Here are some code examples of what you can do with the Enforcer plug-in&#58;<p class="paragraph"/>
Check to domain role for the role owner on the Sprocket domain instance for a user
<div class="code"><pre>def enforcerService
enforcerService.enforce(&#123; hasDomainRole('owner', sprocket, testUser) &#125;)</pre></div><p class="paragraph"/>Checks to see if the test user has the Role ROLE_USER
<div class="code"><pre>def enforcerService
enforcerService.enforce(&#123; hasRole('ROLE_USER', testUser) &#125;)</pre></div><p class="paragraph"/>The default closure for success will be called &#123;return true&#125; so the method will be executed
<div class="code"><pre>@Enforce(&#123; <span class="java&#45;keyword">true</span> &#125;)
def method1() &#123;
    println 'nice'
&#125;</pre></div><p class="paragraph"/>The default closure for success will be called {return true} so the method will be executed
in this example you see if your using more than just the predicate closure  you need to specify
the names of the parameters. Also predicate is named value, which facilitates the above example,
so in that case you don't have to specify the parameters name, but here you do.
<div class="code"><pre>@Enforce(value = &#123; <span class="java&#45;keyword">true</span> &#125;, failure = &#123; <span class="java&#45;keyword">throw</span> <span class="java&#45;keyword">new</span> EnforcerException(<span class="java&#45;quote">"not nice"</span>) &#125;)
def method2() &#123;
    println 'nice'
&#125;</pre></div><p class="paragraph"/>The failure closure will get called
<div class="code"><pre>@Enforce(value = &#123; <span class="java&#45;keyword">false</span> &#125;, failure = &#123; <span class="java&#45;keyword">throw</span> <span class="java&#45;keyword">new</span> EnforcerException(<span class="java&#45;quote">"nice"</span>) &#125;)
def method3() &#123;
    <span class="java&#45;keyword">throw</span> <span class="java&#45;keyword">new</span> EnforcerException(<span class="java&#45;quote">"<span class="java&#45;keyword">this</span> shouldn't happen on method3"</span>)
&#125;</pre></div><p class="paragraph"/>The success closure will get called
<div class="code"><pre>@Enforce(value = &#123; <span class="java&#45;keyword">true</span> &#125;, failure = &#123; <span class="java&#45;keyword">throw</span> <span class="java&#45;keyword">new</span> EnforcerException(<span class="java&#45;quote">"not nice"</span>) &#125;, success = &#123; println <span class="java&#45;quote">"nice"</span> &#125;)
def method4() &#123;<p class="paragraph"/>&#125;</pre></div><p class="paragraph"/>The failure closure will get called
<div class="code"><pre>@Enforce(value = &#123; <span class="java&#45;keyword">false</span> &#125;, failure = &#123; <span class="java&#45;keyword">throw</span> <span class="java&#45;keyword">new</span> EnforcerException(<span class="java&#45;quote">"nice"</span>) &#125;, success = &#123; println <span class="java&#45;quote">"not nice"</span> &#125;)
def method5() &#123;
    <span class="java&#45;keyword">throw</span> <span class="java&#45;keyword">new</span> EnforcerException(<span class="java&#45;quote">"<span class="java&#45;keyword">this</span> shouldn't happen on method5"</span>)
&#125;</pre></div><p class="paragraph"/>
Checking a variable
<div class="code"><pre>@Enforce(&#123; number == 5 &#125;)
def method6(def number) &#123;
    println 'nice'
&#125;</pre></div><p class="paragraph"/>An example using services
<div class="code"><pre>def someService
def someOtherSerive
@Enforce(&#123;someService.isRightNumber(number) &#38;&#38; someOtherService.isRightName(name)&#125;)
def someMethod(<span class="java&#45;object">long</span> number, <span class="java&#45;object">String</span> name) &#123;
    println 'nice'
&#125;</pre></div><p class="paragraph"/>An example using hasDomainRole and hasRole
<div class="code"><pre>@Enforce(&#123;hasDomainRole('owner', spocket, testUser) || hasRole('ROLE_ADMIN', testUser)&#125;)
def someMethod(Srocket sprocket) &#123;
    println 'nice'
&#125;</pre></div>



                <div style="clear:both;margin-top:15px;"></div>
                
                    <div class="toc-item prev-left"><a href="../guide/gettingStarted.html">&lt;&lt; <strong>2</strong><span>Getting Started</span></a></div>
                
                    <div class="toc-item next-right"><a href="../guide/whyUseEnforcer.html"><strong>4</strong><span>Why Use Enforcer</span> >></a></div>
                
                <div style="clear:both"></div>
            </div>
        </td>
        <td id="col2">
            <div class="local clearfix">
                <div class="local-title">
                    <a href="../guide/index.html" target="mainFrame">Quick Reference</a>
                    <span class="toggle">(<a href="#" onclick="localToggle(); return false;">hide</a>)</span>
                </div>
                <div class="menu">
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Scripts</h1><div class="menu-sub">
                        
                            
                            <div class="menu-item"><a href="../ref/Scripts/enforcer-quickstart.html">enforcer-quickstart</a>
                            </div>
                            
                            </div>
                    </div>
                    
                </div>
            </div>
        </td>
    </tr>
</table>

<div id="footer">
    
    
</div>

<script type="text/javascript" src="../js/docs.js"></script>

</body>
</html>
