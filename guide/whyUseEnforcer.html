<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <title>4 Why Use Enforcer 0.3.1</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen, print" title="Style" charset="utf-8"/>
    <link rel="stylesheet" href="../css/pdf.css" type="text/css" media="print" title="PDF" charset="utf-8"/>
    <script type="text/javascript">
function addJsClass() {
    var classes = document.body.className.split(" ");
    classes.push("js");
    document.body.className = classes.join(" ");
}
    </script>
</head>

<body class="body" onload="addJsClass();">
<div id="navigation">
    <ul>
        <li>
            <div id="nav-summary" onmouseover="toggleNavSummary(false)" onmouseout="toggleNavSummary(true)">
                <a href="../guide/index.html" class="button">Table of contents</a>

                <div id="nav-summary-childs" style="display:none;">
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/introduction.html"><strong>1</strong><span>Introduction</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/gettingStarted.html"><strong>2</strong><span>Getting Started</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/usage.html"><strong>3</strong><span>Usage</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/whyUseEnforcer.html"><strong>4</strong><span>Why Use Enforcer</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/extendingEnforcer.html"><strong>5</strong><span>Extending Enforcer</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/testingEnforcer.html"><strong>6</strong><span>Testing Enforcer</span></a>
                    </div>
                    
                    <div class="toc-item" style="margin-left:0"><a href="../guide/enforcerAST.html"><strong>7</strong><span>Taking a look at the Enforce AST code</span></a>
                    </div>
                    
                </div>
            </div>
        </li>
        <li class="separator selected">
            <a id="ref-button" onclick="localToggle(); return false;" href="#">Quick Reference</a>
        </li>
    </ul>
</div>
<div id="header">
    <div class="images clearfix">
        
        
    </div>
    <p></p>
</div>


<table id="colset" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td id="col1">
            <div id="main" class="corner-all">

                
                    <div class="toc-item prev-left"><a href="../guide/usage.html">&lt;&lt; <strong>3</strong><span>Usage</span></a></div>
                

                <span id='toggle-col1' class="toggle">(<a href="#" onclick="localToggle(); return false;">Quick Reference</a>)</span>

                
                    <div class="toc-item next-right"><a href="../guide/extendingEnforcer.html"><strong>5</strong><span>Extending Enforcer</span> >></a></div>
                


                <div class="project">
                    <h1>4 Why Use Enforcer - Reference Documentation</h1>

                    <p><strong>Authors:</strong> Tucker J. Pelletier AKA virtualdogbert</p>

                    <p><strong>Version:</strong> 0.3.1</p>

                    
                </div>

                

                

<h1 id="whyUseEnforcer">4 Why Use Enforcer</h1>
<p class="paragraph"/>
<iframe width="560" height="315" src="https://www.youtube.com/embed/h2sosla0C5k" frameborder="0" allowfullscreen></iframe>
<p class="paragraph"/>
So why would you want to use Enforcer? What's Wrong with Spring Security ACL?<p class="paragraph"/>Before I begin I want to say that Spring Security ACL had it's time, but I think we can do better, given a dynamic language like Groovy. 
I also think that some of the ideas could be portable to a Java 8 lambda syntax. They might not be as convenient, because you don't have Groovy's truth model,<p class="paragraph"/><h3>Well lets take a look at the down sides, to using Spring Security ACL</h3>
<ol>
<li>It's annotations use the Spring EL language, in the form of a string, so&#8230; no compiler help, no IDE help, no syntax highlighting, and EL isn't as flexible as groovy.</li>
<li>It uses a "bit mask" for storing permission, while this is very efficient, but hard to read, also we're not in the 80's anymore, and disk is cheap.</li>
<li>It uses a highly normalized set for domains/tables for storing permission. This means that querying the db will involve many joins, which will slow down the writing and running of queries</li>
<li>Updating permission especially in bulk can be really slow, because of the built-in caching. If you use direct SQL you have to invalidate the plug-ins internal cache</li>
<li>The annotation only gets run of you call from a method outside the service, that you are calling to. This can leed to a false sense of security.</li>
<li>If you are not using a hierarchy for your permission, which I don't see a config option for, you will end up with a lot of permissions in the db. I've seen it as bad and 400,000 permission entries for just over a 1000 containers.</li>
<li>Extending the plug-in is not straight forward. Adding new permissions isn't bad but you have to deal with the "bit mask". However if you want to add functions that can be called in the EL expression&#8230; good luck.  Adding new functions that you can call would involve some been overrides,  and extending classes. I've tried it twice and it didn't work either time.  I do thing however you maybe able to call services from within the EL, with the current version, but don't quote me on that.</li>
<li>It's somewhat hard to setup tests your annotations.</li>
</ol><p class="paragraph"/><h3>Now in response to each, Enforcer:</h3>
<ol>
<li>Use a closure, so you have the full flexibility of groovy, your IDE, will help you and will do syntax highlighting</li>
<li>The default DomainRole, which you don't have to use uses a string which is easy to read and query.</li>
<li>The DomainRole is denormalize, so that it will be quicker and involve less queries to read and write.</li>
<li>As said before DomainRole is denormized so it's quick to update.</li>
<li>The Enforce AST transform/annotation runs every time a method it's annotation is called, unless your are running from the test environment</li>
<li>DomainRole uses a hierarchy by default so you'll have less entries in the db, which will be easier to query and migrate if you have too.</li>
<li>Extending Enforcer is easy, by adding methods to either of the traits the EnforcerService uses, or adding your own trait, to just calling any service from with in the closure(s) you pass in.</li>
<li>Testing is easy see the EnforcerServiceSpec for examples.</li>
</ol><p class="paragraph"/>


                <div style="clear:both;margin-top:15px;"></div>
                
                    <div class="toc-item prev-left"><a href="../guide/usage.html">&lt;&lt; <strong>3</strong><span>Usage</span></a></div>
                
                    <div class="toc-item next-right"><a href="../guide/extendingEnforcer.html"><strong>5</strong><span>Extending Enforcer</span> >></a></div>
                
                <div style="clear:both"></div>
            </div>
        </td>
        <td id="col2">
            <div class="local clearfix">
                <div class="local-title">
                    <a href="../guide/index.html" target="mainFrame">Quick Reference</a>
                    <span class="toggle">(<a href="#" onclick="localToggle(); return false;">hide</a>)</span>
                </div>
                <div class="menu">
                    
                    <div class="menu-block"><h1 class="menu-title" onclick="toggleRef(this.parentNode.childNodes[1])">Scripts</h1><div class="menu-sub">
                        
                            
                            <div class="menu-item"><a href="../ref/Scripts/enforcer-quickstart.html">enforcer-quickstart</a>
                            </div>
                            
                            </div>
                    </div>
                    
                </div>
            </div>
        </td>
    </tr>
</table>

<div id="footer">
    
    
</div>

<script type="text/javascript" src="../js/docs.js"></script>

</body>
</html>
